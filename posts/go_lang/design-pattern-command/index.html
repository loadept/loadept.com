<!DOCTYPE html><html lang="es"> <head><meta charset="UTF-8"><title>Command Pattern en Go</title><link rel="preload" href="/fonts/firacode.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="/images/loadept-glitch.webp" as="image" type="image/webp" crossorigin="anonymous"><meta name="viewport" content="width=device-width"><meta name="description" content="Artículo sobre Command Pattern en Go. Aprende más sobre design-pattern, command-pattern, go, golang, development, diseño, programación, patrón en loadept.com"><meta name="keywords" content="design-pattern, command-pattern, go, golang, development, diseño, programación, patrón"><meta name="author" content="loadept"><meta property="og:title" content="Command Pattern en Go"><meta property="og:description" content="Artículo sobre Command Pattern en Go. Aprende más sobre design-pattern, command-pattern, go, golang, development, diseño, programación, patrón en loadept.com"><meta property="og:image" content="https://loadept.com/loadept.webp"><meta property="og:url" content="https://loadept.com/posts/go_lang/design-pattern-command/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Command Pattern en Go"><meta name="twitter:description" content="Artículo sobre Command Pattern en Go. Aprende más sobre design-pattern, command-pattern, go, golang, development, diseño, programación, patrón en loadept.com"><meta name="twitter:image" content="https://loadept.com/loadept.webp"><meta name="twitter:image:alt" content="Command Pattern en Go"><meta name="theme-color" content="#1f2329"><link rel="icon" href="/favicon.ico" sizes="any"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://loadept.com/posts/go_lang/design-pattern-command/"><link rel="sitemap" href="/sitemap-index.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><link rel="stylesheet" href="/_astro/_go_package_.Bo-keN1g.css"></head> <body class="min-h-screen flex flex-col"> <header class="flex justify-between gap-1 md:mx-30 my-3 top-3 sticky"> <ul class="flex list-none m-0 p-0 justify-evenly md:gap-12 gap-3 items-center"> <li> <a href="https://github.com/loadept" target="_blank" title="github" class="hover:text-[#528bff] transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="23" height="23" viewBox="0,0,256,256" class="hover:text-[#528bff] transition-colors"> <g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal"> <g transform="scale(5.12,5.12)"> <path d="M17.791,46.836c0.711,-0.306 1.209,-1.013 1.209,-1.836v-5.4c0,-0.197 0.016,-0.402 0.041,-0.61c-0.014,0.004 -0.027,0.007 -0.041,0.01c0,0 -3,0 -3.6,0c-1.5,0 -2.8,-0.6 -3.4,-1.8c-0.7,-1.3 -1,-3.5 -2.8,-4.7c-0.3,-0.2 -0.1,-0.5 0.5,-0.5c0.6,0.1 1.9,0.9 2.7,2c0.9,1.1 1.8,2 3.4,2c2.487,0 3.82,-0.125 4.622,-0.555c0.934,-1.389 2.227,-2.445 3.578,-2.445v-0.025c-5.668,-0.182 -9.289,-2.066 -10.975,-4.975c-3.665,0.042 -6.856,0.405 -8.677,0.707c-0.058,-0.327 -0.108,-0.656 -0.151,-0.987c1.797,-0.296 4.843,-0.647 8.345,-0.714c-0.112,-0.276 -0.209,-0.559 -0.291,-0.849c-3.511,-0.178 -6.541,-0.039 -8.187,0.097c-0.02,-0.332 -0.047,-0.663 -0.051,-0.999c1.649,-0.135 4.597,-0.27 8.018,-0.111c-0.079,-0.5 -0.13,-1.011 -0.13,-1.543c0,-1.7 0.6,-3.5 1.7,-5c-0.5,-1.7 -1.2,-5.3 0.2,-6.6c2.7,0 4.6,1.3 5.5,2.1c1.699,-0.701 3.599,-1.101 5.699,-1.101c2.1,0 4,0.4 5.6,1.1c0.9,-0.8 2.8,-2.1 5.5,-2.1c1.5,1.4 0.7,5 0.2,6.6c1.1,1.5 1.7,3.2 1.6,5c0,0.484 -0.045,0.951 -0.11,1.409c3.499,-0.172 6.527,-0.034 8.204,0.102c-0.002,0.337 -0.033,0.666 -0.051,0.999c-1.671,-0.138 -4.775,-0.28 -8.359,-0.089c-0.089,0.336 -0.197,0.663 -0.325,0.98c3.546,0.046 6.665,0.389 8.548,0.689c-0.043,0.332 -0.093,0.661 -0.151,0.987c-1.912,-0.306 -5.171,-0.664 -8.879,-0.682c-1.665,2.878 -5.22,4.755 -10.777,4.974v0.031c2.6,0 5,3.9 5,6.6v5.4c0,0.823 0.498,1.53 1.209,1.836c9.161,-3.032 15.791,-11.672 15.791,-21.836c0,-12.682 -10.317,-23 -23,-23c-12.683,0 -23,10.318 -23,23c0,10.164 6.63,18.804 15.791,21.836z"></path> </g> </g> </svg> </a> </li> <li> <a href="https://www.linkedin.com/in/jesus-machaca-hancco-136119276" target="_blank" title="linkedin" class="hover:text-[#528bff] transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="23" height="23" viewBox="0,0,256,256" class="hover:text-[#528bff] transition-colors"> <g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal"> <g transform="scale(5.12,5.12)"> <path d="M41,4h-32c-2.76,0 -5,2.24 -5,5v32c0,2.76 2.24,5 5,5h32c2.76,0 5,-2.24 5,-5v-32c0,-2.76 -2.24,-5 -5,-5zM17,20v19h-6v-19zM11,14.47c0,-1.4 1.2,-2.47 3,-2.47c1.8,0 2.93,1.07 3,2.47c0,1.4 -1.12,2.53 -3,2.53c-1.8,0 -3,-1.13 -3,-2.53zM39,39h-6c0,0 0,-9.26 0,-10c0,-2 -1,-4 -3.5,-4.04h-0.08c-2.42,0 -3.42,2.06 -3.42,4.04c0,0.91 0,10 0,10h-6v-19h6v2.56c0,0 1.93,-2.56 5.81,-2.56c3.97,0 7.19,2.73 7.19,8.26z"></path> </g> </g> </svg> </a> </li> <li> <a href="https://www.tiktok.com/@loadept" target="_blank" title="tiktok" class="hover:text-[#528bff] transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="23" height="23" viewBox="0,0,256,256" class="hover:text-[#528bff] transition-colors"> <g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal"> <g transform="scale(5.12,5.12)"> <path d="M41,4h-32c-2.757,0 -5,2.243 -5,5v32c0,2.757 2.243,5 5,5h32c2.757,0 5,-2.243 5,-5v-32c0,-2.757 -2.243,-5 -5,-5zM37.006,22.323c-0.227,0.021 -0.457,0.035 -0.69,0.035c-2.623,0 -4.928,-1.349 -6.269,-3.388c0,5.349 0,11.435 0,11.537c0,4.709 -3.818,8.527 -8.527,8.527c-4.709,0 -8.527,-3.818 -8.527,-8.527c0,-4.709 3.818,-8.527 8.527,-8.527c0.178,0 0.352,0.016 0.527,0.027v4.202c-0.175,-0.021 -0.347,-0.053 -0.527,-0.053c-2.404,0 -4.352,1.948 -4.352,4.352c0,2.404 1.948,4.352 4.352,4.352c2.404,0 4.527,-1.894 4.527,-4.298c0,-0.095 0.042,-19.594 0.042,-19.594h4.016c0.378,3.591 3.277,6.425 6.901,6.685z"></path> </g> </g> </svg> </a> </li> <li> <a href="https://www.youtube.com/@load3pt" target="_blank" title="youtube"> <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="23" height="23" viewBox="0,0,256,256" class="hover:text-[#528bff] transition-colors"> <g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal"> <g transform="scale(8.53333,8.53333)"> <path d="M15,4c-4.186,0 -9.61914,1.04883 -9.61914,1.04883l-0.01367,0.01563c-1.90652,0.30491 -3.36719,1.94317 -3.36719,3.93555v6v0.00195v5.99805v0.00195c0.00384,1.96564 1.4353,3.63719 3.37695,3.94336l0.00391,0.00586c0,0 5.43314,1.05078 9.61914,1.05078c4.186,0 9.61914,-1.05078 9.61914,-1.05078l0.00195,-0.00195c1.94389,-0.30554 3.37683,-1.97951 3.37891,-3.94727v-0.00195v-5.99805v-0.00195v-6c-0.00288,-1.96638 -1.43457,-3.63903 -3.37695,-3.94531l-0.00391,-0.00586c0,0 -5.43314,-1.04883 -9.61914,-1.04883zM12,10.39844l8,4.60156l-8,4.60156z"></path> </g> </g> </svg> </a> </li> </ul> <ul class="flex text-xs md:text-sm list-none m-0 p-0 justify-evenly md:gap-12 gap-3 items-center"> <li class="hover:text-[#528bff] transition-colors"> <a href="/" title="home">
Inicio
</a> </li> <li class="hover:text-[#528bff] transition-colors"> <a href="/about" title="about me">
Sobre mí
</a> </li> <li class="hover:text-[#528bff] transition-colors">
Contacto
</li> </ul> </header> <main class="grow mt-12">  <div class="container mx-auto px-4 max-w-4xl mb-20"> <a href="/" class="inline-flex items-center text-[#61afef] mb-8 hover:text-[#528bff] transition-colors"> <span class="text-2xl mr-1"></span> Volver al inicio </a> <article class="prose prose-invert prose-headings:text-[#e5c07b] prose-a:text-[#61afef] max-w-none"> <h1 class="text-4xl font-bold text-[#e5c07b] mb-4"> COMMAND PATTERN EN GO </h1> <div class="flex flex-wrap items-center text-sm text-[#5c6370] mb-8 gap-y-2"> <div class="flex items-center mr-4"> <span class="text-2xl mr-2 text-[#c678dd]"></span> 12/03/2025 </div> <div class="flex items-center flex-wrap gap-2 mt-2 w-full"> <span class="text-2xl mr-1 text-[#98c379]"></span> <span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> design-pattern </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> command-pattern </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> go </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> golang </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> development </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> diseño </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> programación </span><span class="text-xs px-2 py-1 rounded-md bg-[#282c34] text-[#abb2bf] border border-[#3e4451]"> patrón </span> </div> </div> <h1 id="definición">Definición</h1>
<p>El patrón de diseño <strong>Command</strong> es un patrón de <strong>comportamiento</strong> que encapsula una solicitud como un objeto, lo que permite desacoplar el solicitante de la ejecución de la acción. Este patrón facilita que las acciones sean ejecutadas, deshechas o programadas, haciendo más flexible y extensible la implementación de comandos.</p>
<p>El patrón <strong>Command</strong> es una solución efectiva para encapsular funcionalidades específicas que se ejecutan según determinadas condiciones. En lugar de depender de estructuras como <strong>if-else</strong> o <strong>switch-case</strong>, este patrón es ideal cuando se busca extender o modificar la funcionalidad de un sistema sin alterar su código existente.</p>
<p>En <strong>Go</strong>, podemos implementar este patrón usando <strong>interfaces</strong> para definir los comandos y las estructuras correspondientes, de la siguiente manera:</p>
<h3 id="implementación-paso-a-paso">Implementación paso a paso.</h3>
<ol>
<li>Definimos una <strong>interfaz</strong> con los métodos <code>Execute</code> y <code>Undo</code>, que no implementamos directamente. Por convención, estos son los métodos comunes en un comando.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Command</span><span style="color:#F97583"> interface</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">	Execute</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#B392F0">	Undo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="2">
<li>Creamos los <strong>receptores</strong> (<strong>Receiver</strong>) que contienen la lógica que se ejecutará cuando se invoquen los comandos.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "</span><span style="color:#B392F0">fmt</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Car</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">c </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Advance</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"The car is moving forward"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">c </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Stop</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"The car is stopped"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "</span><span style="color:#B392F0">fmt</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Car2</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">c </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car2</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Reload</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"The car is reloading"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">c </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car2</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">RetakePath</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"The car is retaking path"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>Creamos los <strong>concretadores</strong> (<strong>ConcreteCommand</strong>) que implementan los métodos de la interfaz <code>Command</code> y llaman a los métodos apropiados de los receptores.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> CarCommand</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	car </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">o </span><span style="color:#F97583">*</span><span style="color:#B392F0">CarCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Execute</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	o.car.</span><span style="color:#B392F0">Advance</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">o </span><span style="color:#F97583">*</span><span style="color:#B392F0">CarCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	o.car.</span><span style="color:#B392F0">Stop</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> CarCommand2</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	car </span><span style="color:#F97583">*</span><span style="color:#B392F0">Car2</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">o </span><span style="color:#F97583">*</span><span style="color:#B392F0">CarCommand2</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Execute</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	o.car.</span><span style="color:#B392F0">Reload</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">o </span><span style="color:#F97583">*</span><span style="color:#B392F0">CarCommand2</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	o.car.</span><span style="color:#B392F0">RetakePath</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="4">
<li>Finalmente, creamos el <strong>invocador</strong> (<strong>Invoker</strong>) que es quien ejecuta o deshace las acciones de los comandos.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Invoker</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E1E4E8">	command </span><span style="color:#B392F0">Command</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">command</span><span style="color:#B392F0"> Command</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">	i.command </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> command</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Start</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	i.command.</span><span style="color:#B392F0">Execute</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Stop</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	i.command.</span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p><span id="implementación-invocación" style="color: transparent">implementacion-invocacion</span></p>
<ol start="5">
<li>Inicializamos los componentes en el <code>main</code> y demostramos la invocación de los comandos.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	car1 </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Car</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"><span style="color:#E1E4E8">	car2 </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Car2</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	advanceCar </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">CarCommand</span><span style="color:#E1E4E8">{car: car1}</span></span>
<span class="line"><span style="color:#E1E4E8">	reloadCar </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">CarCommand</span><span style="color:#E1E4E8">{car: car2}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	invoker </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(advanceCar)</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">Start</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">Stop</span><span style="color:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(advanceCar)</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">Start</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">Stop</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<blockquote>
<p>Este ejemplo es una implementación básica del patrón <strong>command</strong>, no es el único, ni el definitivo</p>
</blockquote>
<h1 id="una-propuesta-más-cómoda">Una propuesta más cómoda.</h1>
<p>La implementación anterior <a href="#implementaci%C3%B3n-paso-a-paso">(Implementación paso a paso)</a> proporciona una base sólida para comprender el patrón Command, pero presenta algunas limitaciones cuando los comandos y receptores crecen. Si tenemos más comandos, como se muestra en la implementación, el invocador está restringido a aceptar un solo comando a la vez. <strong>¿Qué sucede si necesitamos ejecutar múltiples comandos de forma flexible y eficiente?</strong></p>
<p>Si observamos bien el bloque de <a href="#implementaci%C3%B3n-invocaci%C3%B3n">Implementación e invocación (líneas 9-13)</a>, al usar <code>SetCommand()</code>, estamos modificando el invocador con cada comando. Esto puede no ser tan flexible, ya que nos obliga a establecer solo un comando a la vez. <strong>¿Qué pasa si necesitamos configurar varios comandos?</strong> Podríamos recurrir a un <code>if</code> o a una lógica condicional para asignar diferentes comandos según ciertas condiciones, pero… <strong>¿No era precisamente la intención del patrón Command evitar ese tipo de estructuras condicionales?</strong></p>
<p>En la propuesta siguiente, abordaremos cómo solucionar este problema utilizando un enfoque más flexible, que nos permita manejar múltiples comandos de manera eficiente, sin necesidad de modificar el invocador constantemente o depender de condicionales.</p>
<h2 id="uso-de-map-map">Uso de Map <code>map</code>.</h2>
<p>Para mejorar la flexibilidad del invocador, utilizaremos un <code>map</code> en lugar de un solo comando. Este mapa nos permitirá asociar cada comando con una clave única, de modo que podamos registrar varios comandos y ejecutarlos dinámicamente sin recurrir a <code>Start()</code> como en el ejemplo anterior de <a href="#implementaci%C3%B3n-invocaci%C3%B3n">Implementación e invocación (línea 10)</a>.</p>
<h3 id="implementación-paso-a-paso-con-map">Implementación paso a paso (con <code>map</code>).</h3>
<ol>
<li>Definimos una <strong>interfaz</strong> para los comandos, al igual que en el ejemplo anterior, con los métodos <code>Execute</code> y <code>Undo</code>.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> PersonCommand</span><span style="color:#F97583"> interface</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">	Execute</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#B392F0">	Undo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="2">
<li>Creamos los <strong>receptores</strong> (acciones) que se ejecutarán cuando se invoquen los comandos, de forma similar a los ejemplos anteriores.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "</span><span style="color:#B392F0">fmt</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Drink</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">Drink</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StartDriking</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Start drinking"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">Drink</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StopDriking</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Stop drinking"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "</span><span style="color:#B392F0">fmt</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Eat</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">Eat</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StartEating</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Start eating"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">Eat</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StopEating</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Stop eating"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="3">
<li>Creamos los <strong>concretadores</strong> de comandos, implementando los métodos de la interfaz <code>PersonCommand</code> y llamando a los métodos de los receptores.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> DrinkCommand</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	drink </span><span style="color:#F97583">*</span><span style="color:#B392F0">Drink</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">DrinkCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Execute</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	d.drink.</span><span style="color:#B392F0">StartDriking</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">d </span><span style="color:#F97583">*</span><span style="color:#B392F0">DrinkCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	d.drink.</span><span style="color:#B392F0">StopDriking</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> EatCommand</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	eat </span><span style="color:#F97583">*</span><span style="color:#B392F0">Eat</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e </span><span style="color:#F97583">*</span><span style="color:#B392F0">EatCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Execute</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	e.eat.</span><span style="color:#B392F0">StartEating</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e </span><span style="color:#F97583">*</span><span style="color:#B392F0">EatCommand</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	e.eat.</span><span style="color:#B392F0">StopEating</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="4">
<li>Ahora, modificamos el <strong>invocador</strong> para manejar múltiples comandos utilizando un <code>map</code> que asocie comandos a claves.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Invoker</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E1E4E8">	commands </span><span style="color:#F97583">map</span><span style="color:#E1E4E8">[</span><span style="color:#F97583">string</span><span style="color:#E1E4E8">]</span><span style="color:#B392F0">PersonCommand</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">action</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">command</span><span style="color:#B392F0"> Command</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8"> i.commands </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> nil</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		i.commands </span><span style="color:#F97583">=</span><span style="color:#B392F0"> make</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">map</span><span style="color:#E1E4E8">[</span><span style="color:#F97583">string</span><span style="color:#E1E4E8">]</span><span style="color:#B392F0">Command</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	i.commands[action] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> command</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StartCommand</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">action</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8"> cmd, exists </span><span style="color:#F97583">:=</span><span style="color:#E1E4E8"> i.commands[action]; exists {</span></span>
<span class="line"><span style="color:#E1E4E8">		cmd.</span><span style="color:#B392F0">Excute</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">	} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Unknown command"</span><span style="color:#E1E4E8">, action)</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">i </span><span style="color:#F97583">*</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">StopCommand</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8"> cmd, exists </span><span style="color:#F97583">:=</span><span style="color:#E1E4E8"> i.commands[action]; exists {</span></span>
<span class="line"><span style="color:#E1E4E8">		cmd.</span><span style="color:#B392F0">Undo</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">	} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Unknown command"</span><span style="color:#E1E4E8">, action)</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ol start="5">
<li>Finalmente, inicializamos los receptores e invocador, y demostramos cómo se pueden ejecutar y deshacer múltiples comandos con un solo invocador.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">	action </span><span style="color:#F97583">:=</span><span style="color:#9ECBFF"> "drink"</span><span style="color:#6A737D"> // eat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	eat </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Eat</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"><span style="color:#E1E4E8">	drink </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Drink</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	eatCommand </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">EatCommand</span><span style="color:#E1E4E8">{eat: eat}</span></span>
<span class="line"><span style="color:#E1E4E8">	drinkCommand </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">DrinkCommand</span><span style="color:#E1E4E8">{drink: drink}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	invoker </span><span style="color:#F97583">:=</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0">Invoker</span><span style="color:#E1E4E8">{}</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"eat"</span><span style="color:#E1E4E8">, eatCommand)</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">SetCommand</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"drink"</span><span style="color:#E1E4E8">, drinkCommand)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">StartCommand</span><span style="color:#E1E4E8">(action)</span></span>
<span class="line"><span style="color:#E1E4E8">	invoker.</span><span style="color:#B392F0">StopCommand</span><span style="color:#E1E4E8">(action)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<blockquote>
<p>Con este enfoque, el invocador se convierte en una herramienta mucho más flexible y escalable,
permitiéndonos manejar múltiples comandos sin depender de condicionales ni de modificaciones constantes del invocador.</p>
</blockquote> </article> </div>  </main> <footer class="py-5 bg-linear-to-t from-[#282c34] via-90% via-[#282c34] to-[#1f2329]"> <div class="container mx-auto px-4"> <div class="flex items-center justify-between text-center"> <p class="text-xs text-[#abb2bf]"> <span class="text-[#c678dd]">loadept</span> <span class="text-[#e06c75]">-</span> 2026 </p> <a href="https://github.com/loadept/loadept.com" target="_blank" title="source" class="text-xs"> <span class="outline-none text-[#e06c75] border-b">Código fuente</span> </a> </div> </div> </footer> </body></html>